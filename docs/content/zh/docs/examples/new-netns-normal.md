---
title: "检测新创建的网络命名空间"
weight: 180
---

## 使用场景

- 跟踪捕获开始后出现的命名空间，就像 `test_netns_newly_normal.sh` 一样。
- 适用于动态创建临时命名空间的集成测试。
- 在动态创建的环境（例如 CI/CD 管道或临时测试设置）中监控网络活动。
- 跟踪为安全或资源管理创建隔离网络命名空间的应用程序的网络通信。
- 在频繁预配新网络命名空间的容器编排系统中调试网络问题。

## 命令

```bash
sudo ptcpdump -i any  --netns newly 'icmp'
```

首先启动 ptcpdump，然后添加命名空间并生成流量——例如，使用 `test_netns_newly_normal.sh` 中的辅助程序，该程序创建 veth 对并在 `192.168.64.1` 和 `192.168.64.2` 之间执行 ping 操作。ptcpdump 会自动附加到新的命名空间并记录双向 ICMP 交换。